#
# Routing de sfGuard
#
sf_guard_signin:
  url:   /login
  param: { module: chCmsFrontendAccount, action: signin }

sf_guard_signout:
  url:   /logout
  param: { module: chCmsFrontendAccount, action: signout }

#sf_guard_signup:
#  url:   /register
#  param: { module: chCmsFrontendSignup, action: register }
#
#sf_guard_signup:
#  url:   /register
#  param: { module: chCmsFrontendSignup, action: register }

sf_guard_how_to_activate:
  url:   /compte/comment-activer-son-compte
  param: { module: chCmsFrontendSignup, action: howToActivate }

sf_guard_why_register:
  url:   /compte/pourquoi-creer-son-compte
  param: { module: chCmsFrontendSignup, action: whyRegister }

sf_guard_my_account:
  url:  /compte
  param: { module: chCmsFrontendAccount, action: index }

#
# companies
#
company:
  url:   entreprises
  params: { module: Companies, action: index }

company_page:
  url:   entreprises/:page
  params: { module: Companies, action: index }
  requirements:
    page: \d*

company_show:
  url:   entreprise/:slug
  class:    sfPropelRoute
  params: { module: Companies, action: show }
  options:
    model: Company
    type:  object
  requirements:
    slug: "[\w-]+"

company_join:
  url:   entreprise/join/:slug
  class:    sfPropelRoute
  params: { module: Companies, action: joinCompany }
  options:
    model: Company
    type:  object
  requirements:
    slug: "[\w-]+"

company_join_without_ticket:
  url:   entreprise/join-no-ticket/:slug
  class:    sfPropelRoute
  params: { module: Companies, action: joinCompanyForContractor }
  options:
    model: Company
    type:  object
  requirements:
    slug: "[\w-]+"

# be careful if you change this
# as this url is hardcoded in the NewFileMail class
# in order to send direct link to user.
company_enter_ticket:
  url:   entreprise/entrer-ticket/:slug
  class:    sfPropelRoute
  params: { module: Companies, action: joinCompanyWithTicket }
  options:
    model: Company
    type:  object
  requirements:
    slug: "[\w-]+"

company_quit:
  url:   entreprise/quit/:slug
  class:    sfPropelRoute
  params: { module: Companies, action: leaveCompany }
  options:
    model: Company
    type:  object
  requirements:
    slug: "[\w-]+"

company_list_for_category:
  url: /entreprises/categorie/:cat_id
  params: { module: Companies, action: index }

company_list_for_category_page:
  url: /entreprises/categorie/:cat_id/:page
  params: { module: Companies, action: index }

company_list_clear_category_filter:
  url: /entreprises/categories/clearfilter
  params: { module: Companies, action: ClearCategoryFilter }

company_mine:
  url: /compte/mes-entreprises
  params: { module: Companies, action: myCompanies }

company_mine_page:
  url: /compte/mes-entreprises/:page
  params: { module: Companies, action: myCompanies }

company_agenda:
  url:  /agenda/:slug/:action
  class:    sfPropelRoute
  params: { module: companyAgenda }
  options:
    model: Company
    type:  object
    requirements:
    slug: "[\w-]+"


#
# personnal agenda routes
#
personnal_agenda_index:
  url:    /compte/agenda-personnel
  params: { module: personnalAgenda, action: index }

personnal_agenda:
  url:    /compte/agenda-personnel/:action
  params: { module: personnalAgenda }

#
# jquery form validation
#
sfJqueryFormValidationFilter:
  url: /js/forms/validation/:form.js
  param: { module: sfJqueryFormVal, action: index }
  requirements:
    sf_method: [GET]
    form: "\w+"



# default rules

sf_guard_my_account_all:
  url:  /compte/:action
  param: { module: chCmsFrontendAccount }

faq:
  url: /faq
  params:  { module: chCmsFaq, action: index }
  options:
    scope:  users
    order_by: question
    order_direction:  ASC
    page_length:  999

get_pro_account_send:
  class: sfRequestRoute
  url:    /contact/professionnel
  params: {module: getProAccount, action: send }
  requirements:
    sf_method: post

get_pro_account:
  class: sfRequestRoute
  url:    /contact/professionnel
  params: {module: getProAccount, action:index }
  requirements:
    sf_method: get

contact_send:
  class: sfRequestRoute
  url:    /nous-contacter
  params: {module: contact, action: send }
  requirements:
    sf_method: post

contact:
  class: sfRequestRoute
  url:    /nous-contacter
  params: {module: contact, action:index }
  requirements:
    sf_method: get

home_apercu:
  url:  /apercu
  param: { module: home, action: apercu }

home_about:
  url:  /a-propos
  param: { module: home, action: about }

help:
  url:  /aide
  param: { module: home, action: help }

homepage:
  url:   /login
  param: { module: chCmsFrontendAccount, action: signin }

base_script:
  url:   /js/tresa.:sf_format
  param: { module: home, action: script, sf_format: js }

# solr
search:
  url:   /entreprises/rechercher
  param: { module: TresaHomeSearch, action: index }

search_result:
  url:   /entreprises/resultats
  param: { module: TresaHomeSearch, action: search }


#default_index:
#  url:   /:module
#  param: { action: index }
#
default:
  url:   /:module/:action/*
