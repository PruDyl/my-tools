<?php
/**
* @classname:chCmsFormExtraPluginRouting
* the routing class for chCmsFormExtraPlugin
*
* @package chCmsFormExtraPlugin
* @subpackage Routing
* @author Julien MUETTON <julien_muetton@carpe-hora.com>
* @copyright 2010
*/
class chCmsFormExtraPluginRouting
{
  public static function listenToRoutingLoadConfigurationEvent(sfEvent $event)
  {
    $routing = $event->getSubject();
    foreach (array('chCmsTownsAutoComplete', 'chCmsCarsAutoComplete', 'chCmsFormExtraDemo') as $module)
    {
      if (in_array($module, sfConfig::get('sf_enabled_modules')))
      {
        call_user_func(array('chCmsFormExtraPluginRouting',sprintf('prepend%sRoutes', ucfirst($module))),  $routing);
      }
    }
  }

  protected static function prependchCmsTownsAutoCompleteRoutes($routing)
  {
    $routing->prependRoute(
                    'chcms_towns_autocomplete',
                    new sfRoute(
                        '/chcms/autocomplete/towns.json',
                        array('module' => 'chCmsTownsAutoComplete', 'action' => 'getTownsForQuery'),
                        array(),
                        array('app_expose' =>true)));
  }

  protected static function prependchCmsCarsAutoCompleteRoutes($routing)
  {
    $routing->prependRoute(
                    'chcms_cars_autocomplete',
                    new sfRoute(
                        '/chcms/autocomplete/cars.json',
                        array('module' => 'chCmsCarsAutoComplete', 'action' => 'getCarsForQuery')
                        array(),
                        array('app_expose' =>true)));
  }

  protected static function prependchCmsFormExtraDemoRoutes($routing)
  {
    $routing->prependRoute(
                    'chcms_for_extra_demo',
                    new sfRoute(
                        '/chcms/form_extra/demo.html',
                        array('module' => 'chCmsFormExtraDemo', 'action' => 'demo')));
  }
} // END OF chCmsFormExtraPluginRouting
