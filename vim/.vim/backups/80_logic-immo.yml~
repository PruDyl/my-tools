# Euromaster
# =======================
#
# Introduction
# ------------
#
# describes scenario for "logic_immo agence"
#
# calendars
# ---------
#
# In this scenario, manager, agent 1, agent 2
# have a calendar each.
#
# Manager can access everybody calendar's, but his is not published
#
#
# contacts
# --------
#
# everything else has to be defined
#
# To sum up
# ---------
#
# ### calendar visibility
# please fix me !
#
# | contractor          | Entity    | Calendar  | Result    |
# | demo                | PARENT    | PARENT    | PROTECTED |
# | collaborateur demo  | COMPANY   | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
#
# ### calendar publication
#
# | contractor          | Entity    | Calendar  | Result    |
# | demo                | PARENT    | PARENT    | PROTECTED |
# | collaborateur demo  | COMPANY   | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
#

Company:
  logic_immo_agence:
    name:         logic-immo agence
    phone:        '0556017000'
    mail:         immo@logic-immo.com
    address_1:    rue des boulevards
    address_2:    ''
    address_3:    ''
    zip_code:     '63000'
    town:         Clermont-Ferrand
    presentation:  |
        Un concessionnaire immomobile.
        Si vous êtes intéressé par le produit, il ne vous reste qu'à remplir une demande de contact sur le site pro.t-resa.fr

LinkCompanyCategory:
  logic_immo_agence_root:
    company_id:   logic_immo_agence
    category_id:  root
  logic_immo_agence_agent:
    company_id:   logic_immo_agence
    category_id:  agent_immobilier

Service:
  service_logic_immo_1_3:
    company_id:   logic_immo_agence
    name:         visite
    service_type: ServiceLogicImmo
    duration:     30
  service_logic_immo_2_3:
    company_id:   logic_immo_agence
    name:         expertise
    service_type: ServiceLogicImmo
    duration:     75
  service_logic_immo_3_3:
    company_id:   logic_immo_agence
    name:         vente
    service_type: ServiceLogicImmo
    duration:     60

RetailerContract:
  logic_immo_agence:
    retailer_id: retailer_logic_immo

Contract:
  logic_immo_agence:
    company_id:         logic_immo_agence
    subscriber_id:      pro1
    nb_max_contractors: 4
    nb_max_services:    4
    is_public:          true
    retailer_contract_id: logic_immo_agence

ContractProperty:
  logic_immo_service:
    contract_id: logic_immo_agence
    property_name: SERVICE
    property_value: ServiceLogicImmo

CompanyPreferences:
  logic_immo_agence:
    company_id:   logic_immo_agence
    is_public:    false
    need_ticket:  false

CompanyVocabulary:
 logic_immo_agence:
    company_id:   logic_immo_agence
    contact:      '[-Inf,1]fiche client|(1,+Inf]fiches clients'
    client:       '[-Inf,1]client|(1,+Inf]clients'
    assistant:    '[-Inf,1]secrétaire|(1,+Inf]secrétaires'

LinkCompanyAvailableModule:
  logic_immo_agence_contractors:
    company_id: logic_immo_agence
    available_module_id:  contractors
  logic_immo_agence_ressources:
    company_id: logic_immo_agence
    available_module_id:  ressources
  logic_immo_agence_admin:
    company_id: logic_immo_agence
    available_module_id:  admin
  logic_immo_agence_dashboard:
    company_id: logic_immo_agence
    available_module_id:  dashboard
  logic_immo_agence_clients:
    company_id: logic_immo_agence
    available_module_id:  clients

CompanyDefaultCredential:
  logic_immo_agence_my_account:
    company_id: logic_immo_agence
    credential: my_account

  logic_immo_agence_my_preferences:
    company_id: logic_immo_agence
    credential: my_preferences

  logic_immo_agence_my_rights:
    company_id: logic_immo_agence
    credential: my_rights

Contractor:
  logic_immo_manager:
    company_id:     logic_immo_agence
    user_id:        demo
    entity_type:    <?php echo CompanyEntityPeer::CLASSKEY_CONTRACTOR ?> 
    company_name:   Manager
    agenda_header:  Manager
    public_name:    Manager
    phone:
    mobile:
    mail:       manager@immo.com
    contacts_default_visibility:    <?php echo ContactQuery::PRIVATE_VISIBILITY ?> 
    access_contact_company:         <?php echo Contact::RIGHT_MODIFY ?> 
    access_contact_protected:       <?php echo Contact::RIGHT_NONE ?> 
    calendars_default_visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    access_calendar_company:        <?php echo Calendar::RIGHT_VIEW ?> 
    access_calendar_protected:      <?php echo Calendar::RIGHT_NONE ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  logic_immo_agent_1:
    company_id:    logic_immo_agence
    entity_type:    <?php echo CompanyEntityPeer::CLASSKEY_CONTRACTOR ?> 
    company_name:   'Agent 1'
    agenda_header:  'Agent 1'
    public_name:    'Agent 1'
    phone:      '0098762032'
    mobile:
    mail:       agent_1@immo.com
    contacts_default_visibility:    <?php echo ContactQuery::COMPANY_VISIBILITY ?> 
    access_contact_company:         <?php echo Contact::RIGHT_MODIFY ?> 
    access_contact_protected:       <?php echo Contact::RIGHT_NONE ?> 
    calendars_default_visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    access_calendar_company:        <?php echo Calendar::RIGHT_VIEW ?> 
    access_calendar_protected:      <?php echo Calendar::RIGHT_NONE ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  logic_immo_agent_2:
    company_id:    logic_immo_agence
    entity_type:    <?php echo CompanyEntityPeer::CLASSKEY_CONTRACTOR ?> 
    company_name:   'Agent 2'
    agenda_header:  'Agent 2'
    public_name:    'Agent 2'
    phone:      '0098762032'
    mobile:
    mail:       agent_2@immo.com
    contacts_default_visibility:    <?php echo ContactQuery::COMPANY_VISIBILITY ?> 
    access_contact_company:         <?php echo Contact::RIGHT_MODIFY ?> 
    access_contact_protected:       <?php echo Contact::RIGHT_NONE ?> 
    calendars_default_visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    access_calendar_company:        <?php echo Calendar::RIGHT_VIEW ?> 
    access_calendar_protected:      <?php echo Calendar::RIGHT_NONE ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 

CompanyEntityCredential:
  logic_immo_manager_admin:
    entity_id:  logic_immo_manager
    credential: company_admin


Calendar:
  manager_logic_immo_agence:
    name: Manager
  agent_1_logic_immo_agence:
    name: Agent 1
  agent_2_logic_immo_agence:
    name: Agent 2

LinkCalendarEntity:
  manager_logic_immo_agence_logic_immo_agence:
    calendar_id:  manager_logic_immo_agence
    entity_id:    logic_immo_manager
    visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  agent_2_logic_immo_agence_logic_immo_agence:
    calendar_id:  agent_2_logic_immo_agence
    entity_id:    logic_immo_agent_2
    visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  agent_1_logic_immo_agence_logic_immo_agence:
    calendar_id:  agent_1_logic_immo_agence
    entity_id:    logic_immo_agent_1
    visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 

FreeBusy:
  business_hour_1_1:
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    priority:         <?php echo FreeBusyBusinessHour::PRIORITY; ?> 
    state:            <?php echo FreeBusyBusinessHour::STATE; ?> 
    descendant_class: FreeBusyBusinessHour
    accepted_at:      <?php echo time(); ?> 

  business_hour_2_1:
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    priority:         <?php echo FreeBusyBusinessHour::PRIORITY; ?> 
    state:            <?php echo FreeBusyBusinessHour::STATE; ?> 
    descendant_class: FreeBusyBusinessHour
    accepted_at:      <?php echo time(); ?> 

FreeBusyBusinessHour:
  _business_hour_1_1:
    id:               business_hour_1_1
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    start_hour:       <?php echo 60*8 ?> 
    end_hour:         <?php echo 60*12 ?> 
    apply_day:        <?php echo chCmsWeekDay::BIN_MONDAY + chCmsWeekDay::BIN_TUESDAY + chCmsWeekDay::BIN_WEDNESDAY + chCmsWeekDay::BIN_THURSDAY + chCmsWeekDay::BIN_FRIDAY ?> 
    accepted_at:      <?php echo time(); ?> 

  _business_hour_2_1:
    id:               business_hour_2_1
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    start_hour:       <?php echo 60*14 ?> 
    end_hour:         <?php echo 60*19 ?> 
    apply_day:        <?php echo chCmsWeekDay::BIN_MONDAY + chCmsWeekDay::BIN_TUESDAY + chCmsWeekDay::BIN_THURSDAY + chCmsWeekDay::BIN_FRIDAY ?> 
    accepted_at:      <?php echo time(); ?> 


LinkFreeBusyCalendar:
  # company: demo_1
  # contractors
  link_rule_c_1_1_1:
    free_busy_id:     business_hour_1_1
    calendar_id:			manager_logic_immo_agence
  link_rule_c_1_1_2:
    free_busy_id:     business_hour_1_1
    calendar_id:			agent_1_logic_immo_agence
  link_rule_c_2_1_2:
    free_busy_id:     business_hour_2_1
    calendar_id:			agent_2_logic_immo_agence

LinkFreeBusyService:
  link_rule_s_1_1_1:
    free_busy_id:     business_hour_1_1
    service_id:       service_logic_immo_1_3
  link_rule_s_1_2_1:
    free_busy_id:     business_hour_1_1
    service_id:       service_logic_immo_2_3
  link_rule_s_1_3_1:
    free_busy_id:     business_hour_1_1
    service_id:       service_logic_immo_3_3
  link_rule_s_2_1_1:
    free_busy_id:     business_hour_2_1
    service_id:        service_logic_immo_1_3
  link_rule_s_2_2_1:
    free_busy_id:     business_hour_2_1
    service_id:        service_logic_immo_2_3
  link_rule_s_2_3_1:
    free_busy_id:     business_hour_2_1
    service_id:        service_logic_immo_3_3
Contact:
  logic_immo_maria:
    name:   Maria
  logic_immo_amelie:
    name:   Amélie
  logic_immo_clara:
    name:   Clara
  logic_immo_camille:
    name:   Camille
  logic_immo_alphonse:
    name:   Alphonse
  logic_immo_ed:
    name:   Ed
  logic_immo_raphael:
    name:   Raphaël
  logic_immo_xavier:
    name:   Xavier


ContactCompany:
  logic_immo_maria:
    company_id: logic_immo_agence
    id_contact: logic_immo_maria
  logic_immo_xavier:
    company_id: logic_immo_agence
    id_contact: logic_immo_xavier
    deleted_at: 2011-05-04 11:25:00

ContactEntity:
  logic_immo_amelie_manager:
    entity_id: logic_immo_manager
    id_contact: logic_immo_amelie
  logic_immo_clara_manager:
    entity_id: logic_immo_manager
    id_contact: logic_immo_clara
    deleted_at: 2011-05-04 11:20:00
  logic_immo_camille_manager:
    entity_id: logic_immo_manager
    id_contact: logic_immo_camille

  logic_immo_alphonse_agent_1:
    entity_id: logic_immo_agent_1
    id_contact: logic_immo_alphonse
  logic_immo_ed_agent_1:
    entity_id: logic_immo_agent_1
    id_contact: logic_immo_ed
    deleted_at: 2011-05-04 11:10:00
  logic_immo_raphael_agent_1:
    entity_id: logic_immo_agent_1
    id_contact: logic_immo_raphael
    visibility: 2

