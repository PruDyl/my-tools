<?php
/**
 * This file declare the chCmsAdminContractorPluginCredentials class.
 *
 * @package chCmsAdminContractorPlugin
 * @subpackage credentials
 * @author Ludovic Pellé <ludovic_pelle@carpe-hora.com>
 * @copyright (c) Carpe Hora SARL 2011
 * @since 2011-05-25
 */

/**
 * define the credentials for chCmsAdminContractorPlugin
 */
class chCmsAdminContractorPluginCredentials
{
  /**
   * listen to the Amdin menu init event
   *
   * @return void
   **/
  public static function listenToAdminMenuInitEvent(sfEvent $event)
  {
    $menu = $event->getSubject();
    $company = $event["user"]->getSelectedCompany();
    $menu->addCredential(
                    "admin_edit_contractor", 
                    sprintf("Edition des %s", $company->getVocabulary("contractor", 2)), 
                    strtr("Donne accès à la liste des %contractors%.\n".
                          "L'administrateur peut ainsi ajouter ou modifier les %contractors% existants.",array(
                            "%contractors%" => $company->getVocabulary("contractor", 2))),
                    ucfirst(sprintf("%s", $company->getVocabulary("contractor", 2)))
                    );

    $menu->addCredential(
                    "admin_edit_assistants", 
                    sprintf("Edition des %s", $company->getVocabulary("assistant", 2)), 
                    strtr("Donne accès à la liste des %contractors%.\n".
                          "L'administrateur peut ainsi ajouter ou modifier les droits des  %assistants%.",array(
                            "%contractors%" => $company->getVocabulary("contractor", 2),
                            "%assistants%" => $company->getVocabulary("assistant", 2))),
                    ucfirst(sprintf("%s", $company->getVocabulary("contractor", 2)))
                    );
    $menu->addCredential(
                    "admin", 
                    sprintf("Administrateur"), 
                    strtr("Les droits d'administrateurs permettent d'accèder aux menus:<ul><li>%contractors%</li><li>entreprise</li><li>Tresa</li></ul>",array(
                            "%contractors%" => $company->getVocabulary("contractor", 2))),
                    'Administration'
                    );
  }
} // END OF chCmsAdminContractorPluginCredentials
