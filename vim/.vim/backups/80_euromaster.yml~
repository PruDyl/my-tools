# Euromaster
# =======================
#
# Introduction
# ------------
#
# describes scenario for "euromaster garage"
#
# calendars
# ---------
#
# In this scenario, manager, mechanic 1, mechanic 2
# have a calendar each.
#
# Manager can access everybody calendar's, but his is not published
#
#
# contacts
# --------
#
# everything else has to be defined
#
# To sum up
# ---------
#
# ### calendar visibility
# please fix me !
#
# | contractor          | Entity    | Calendar  | Result    |
# | demo                | PARENT    | PARENT    | PROTECTED |
# | collaborateur demo  | COMPANY   | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
#
# ### calendar publication
#
# | contractor          | Entity    | Calendar  | Result    |
# | demo                | PARENT    | PARENT    | PROTECTED |
# | collaborateur demo  | COMPANY   | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
# | ressource 1         | PARENT    | PARENT    | PROTECTED |
#

Company:
  euromaster_garage:
    name:         euromaster garage
    phone:        '0556017000'
    mail:         auto@euromaster.com
    address_1:    rue des boulevards
    address_2:    ''
    address_3:    ''
    zip_code:     '63000'
    town:         Clermont-Ferrand
    presentation:  |
        Un concessionnaire automobile.
        Si vous êtes intéressé par le produit, il ne vous reste qu'à remplir une demande de contact sur le site pro.t-resa.fr

LinkCompanyCategory:
  euromaster_garage_root:
    company_id:   euromaster_garage
    category_id:  root
  euromaster_garage_coiffeur:
    company_id:   euromaster_garage
    category_id:  coiffeur

Service:
  service_euromaster_1_3:
    company_id:   euromaster_garage
    name:         montage des pneus
    service_type: ServiceEuromaster
    duration:     30
  service_euromaster_2_3:
    company_id:   euromaster_garage
    name:         révision toute marque
    service_type: ServiceEuromaster
    duration:     75
  service_euromaster_3_3:
    company_id:   euromaster_garage
    name:         forfait vidange
    service_type: ServiceEuromaster
    duration:     25

RetailerContract:
  euromaster_garage:
    retailer_id: retailer_euromaster

Contract:
  euromaster_garage:
    company_id:         euromaster_garage
    subscriber_id:      pro1
    nb_max_contractors: 1
    nb_max_services:    3
    is_public:          true
    retailer_contract_id: euromaster_garage

ContractProperty:
  euromaster_service:
    contract_id: euromaster_garage
    property_name: SERVICE
    property_value: ServiceEuromaster

CompanyPreferences:
  euromaster_garage:
    company_id:   euromaster_garage
    is_public:    false
    need_ticket:  false
    calendars_default_visibility:   <?php echo CalendarQuery::PROTECTED_VISIBILITY ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PROTECTED_PUBLICATION ?> 

CompanyVocabulary:
 euromaster_garage:
    company_id:   euromaster_garage
    contact:      '[-Inf,1]fiche client|(1,+Inf]fiches clients'
    client:       '[-Inf,1]client|(1,+Inf]clients'
    assistant:    '[-Inf,1]secrétaire|(1,+Inf]secrétaires'

CompanyVocabulary:
  euromaster_garage:
    company_id:   euromaster_garage
    contact:      '[-Inf,1]fiche client|(1,+Inf]fiches clients'
    client:       '[-Inf,1]client|(1,+Inf]clients'
    assistant:    '[-Inf,1]employé|(1,+Inf]employés'

LinkCompanyAvailableModule:
  euromaster_garage_contractors:
    company_id: euromaster_garage
    available_module_id:  contractors
  euromaster_garage_ressources:
    company_id: euromaster_garage
    available_module_id:  ressources
  euromaster_garage_admin:
    company_id: euromaster_garage
    available_module_id:  admin
  euromaster_garage_dashboard:
    company_id: euromaster_garage
    available_module_id:  dashboard
  euromaster_garage_clients:
    company_id: euromaster_garage
    available_module_id:  clients

CompanyDefaultCredential:
  euromaster_garage_my_account:
    company_id: euromaster_garage
    credential: my_account

  euromaster_garage_my_preferences:
    company_id: euromaster_garage
    credential: my_preferences

  euromaster_garage_my_rights:
    company_id: euromaster_garage
    credential: my_rights

Contractor:
  euromaster_manager:
    company_id:     euromaster_garage
    user_id:        demo
    entity_type:    <?php echo CompanyEntityPeer::CLASSKEY_CONTRACTOR ?> 
    company_name:   Manager
    agenda_header:  Manager
    public_name:    Manager
    phone:
    mobile:
    mail:       manager@auto.com
    contacts_default_visibility:    <?php echo ContactQuery::PRIVATE_VISIBILITY ?> 
    access_contact_company:         <?php echo Contact::RIGHT_MODIFY ?> 
    access_contact_protected:       <?php echo Contact::RIGHT_NONE ?> 
    calendars_default_visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    access_calendar_company:        <?php echo Calendar::RIGHT_VIEW ?> 
    access_calendar_protected:      <?php echo Calendar::RIGHT_NONE ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  euromaster_mechanic_1:
    company_id:    euromaster_garage
    entity_type:    <?php echo CompanyEntityPeer::CLASSKEY_CONTRACTOR ?> 
    company_name:   'Mechanic 1'
    agenda_header:  'Mechanic 1'
    public_name:    'Mechanic 1'
    phone:      '0098762032'
    mobile:
    mail:       mechanic_1@auto.com
    contacts_default_visibility:    <?php echo ContactQuery::COMPANY_VISIBILITY ?> 
    access_contact_company:         <?php echo Contact::RIGHT_MODIFY ?> 
    access_contact_protected:       <?php echo Contact::RIGHT_NONE ?> 
    calendars_default_visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    access_calendar_company:        <?php echo Calendar::RIGHT_VIEW ?> 
    access_calendar_protected:      <?php echo Calendar::RIGHT_NONE ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  euromaster_mechanic_2:
    company_id:    euromaster_garage
    entity_type:    <?php echo CompanyEntityPeer::CLASSKEY_CONTRACTOR ?> 
    company_name:   'Mechanic 2'
    agenda_header:  'Mechanic 2'
    public_name:    'Mechanic 2'
    phone:      '0098762032'
    mobile:
    mail:       mechanic_2@auto.com
    contacts_default_visibility:    <?php echo ContactQuery::COMPANY_VISIBILITY ?> 
    access_contact_company:         <?php echo Contact::RIGHT_MODIFY ?> 
    access_contact_protected:       <?php echo Contact::RIGHT_NONE ?> 
    calendars_default_visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    access_calendar_company:        <?php echo Calendar::RIGHT_VIEW ?> 
    access_calendar_protected:      <?php echo Calendar::RIGHT_NONE ?> 
    calendars_default_publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 

CompanyEntityCredential:
  euromaster_manager_admin:
    entity_id:  euromaster_manager
    credential: company_admin


Calendar:
  manager_euromaster_garage:
    name: Manager
  mechanic_1_euromaster_garage:
    name: Mechanic 1
  mechanic_2_euromaster_garage:
    name: Mechanic 2

LinkCalendarEntity:
  manager_euromaster_garage_euromaster_garage:
    calendar_id:  manager_euromaster_garage
    entity_id:    euromaster_manager
    visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  mechanic_2_euromaster_garage_euromaster_garage:
    calendar_id:  mechanic_2_euromaster_garage
    entity_id:    euromaster_mechanic_2
    visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 
  mechanic_1_euromaster_garage_euromaster_garage:
    calendar_id:  mechanic_1_euromaster_garage
    entity_id:    euromaster_mechanic_1
    visibility:   <?php echo CalendarQuery::PARENT_VISIBILITY ?> 
    publication:  <?php echo CalendarQuery::PARENT_PUBLICATION ?> 


FreeBusy:
  business_hour_1_1:
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    priority:         <?php echo FreeBusyBusinessHour::PRIORITY; ?> 
    state:            <?php echo FreeBusyBusinessHour::STATE; ?> 
    descendant_class: FreeBusyBusinessHour
    accepted_at:      <?php echo time(); ?> 

  business_hour_2_1:
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    priority:         <?php echo FreeBusyBusinessHour::PRIORITY; ?> 
    state:            <?php echo FreeBusyBusinessHour::STATE; ?> 
    descendant_class: FreeBusyBusinessHour
    accepted_at:      <?php echo time(); ?> 

FreeBusyBusinessHour:
  _business_hour_1_1:
    id:               business_hour_1_1
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    start_hour:       <?php echo 60*8 ?> 
    end_hour:         <?php echo 60*12 ?> 
    apply_day:        <?php echo chCmsWeekDay::BIN_MONDAY + chCmsWeekDay::BIN_TUESDAY + chCmsWeekDay::BIN_WEDNESDAY + chCmsWeekDay::BIN_THURSDAY + chCmsWeekDay::BIN_FRIDAY ?> 
    accepted_at:      <?php echo time(); ?> 

  _business_hour_2_1:
    id:               business_hour_2_1
    start_apply_date: <?php echo date('Y-m-d', strtotime('last week')); ?> 
    never_end:        true
    start_hour:       <?php echo 60*14 ?> 
    end_hour:         <?php echo 60*19 ?> 
    apply_day:        <?php echo chCmsWeekDay::BIN_MONDAY + chCmsWeekDay::BIN_TUESDAY + chCmsWeekDay::BIN_THURSDAY + chCmsWeekDay::BIN_FRIDAY ?> 
    accepted_at:      <?php echo time(); ?> 


LinkFreeBusyCalendar:
  # company: demo_1
  # contractors
  link_rule_c_1_1_1:
    free_busy_id:     business_hour_1_1
    calendar_id:			manager_euromaster_garage
  link_rule_c_1_1_2:
    free_busy_id:     business_hour_1_1
    calendar_id:			mechanic_1_euromaster_garage
  link_rule_c_2_1_2:
    free_busy_id:     business_hour_2_1
    calendar_id:			mechanic_2_euromaster_garage

LinkFreeBusyService:
  link_rule_s_1_1_1:
    free_busy_id:     business_hour_1_1
    service_id:       service_euromaster_1_3
  link_rule_s_1_2_1:
    free_busy_id:     business_hour_1_1
    service_id:       service_euromaster_2_3
  link_rule_s_1_3_1:
    free_busy_id:     business_hour_1_1
    service_id:       service_euromaster_3_3
  link_rule_s_2_1_1:
    free_busy_id:     business_hour_2_1
    service_id:        service_euromaster_1_3
  link_rule_s_2_2_1:
    free_busy_id:     business_hour_2_1
    service_id:        service_euromaster_2_3
  link_rule_s_2_3_1:
    free_busy_id:     business_hour_2_1
    service_id:        service_euromaster_3_3

Contact:
  euromaster_maria:
    name:   Maria
  euromaster_amelie:
    name:   Amélie
  euromaster_clara:
    name:   Clara
  euromaster_camille:
    name:   Camille
  euromaster_alphonse:
    name:   Alphonse
  euromaster_ed:
    name:   Ed
  euromaster_raphael:
    name:   Raphaël
  euromaster_xavier:
    name:   Xavier


ContactCompany:
  euromaster_maria:
    company_id: euromaster_garage
    id_contact: euromaster_maria
  euromaster_xavier:
    company_id: euromaster_garage
    id_contact: euromaster_xavier
    deleted_at: 2011-05-04 11:25:00

ContactEntity:
  euromaster_amelie_manager:
    entity_id: euromaster_manager
    id_contact: euromaster_amelie
  euromaster_clara_manager:
    entity_id: euromaster_manager
    id_contact: euromaster_clara
    deleted_at: 2011-05-04 11:20:00
  euromaster_camille_manager:
    entity_id: euromaster_manager
    id_contact: euromaster_camille

  euromaster_alphonse_mechanic_1:
    entity_id: euromaster_mechanic_1
    id_contact: euromaster_alphonse
  euromaster_ed_mechanic_1:
    entity_id: euromaster_mechanic_1
    id_contact: euromaster_ed
    deleted_at: 2011-05-04 11:10:00
  euromaster_raphael_mechanic_1:
    entity_id: euromaster_mechanic_1
    id_contact: euromaster_raphael
    visibility: 2

